<html>
    <head>
    </head>
    <body>
        <input type="button" id="btn_enviar_mensaje" value="Enviar"/>
    </body>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
    <script src="FiltrosYTransformaciones.js"></script>
    <script src="GeneradorDeIdMensaje.js"></script>
    <script src="NodoPortalBidi.js"></script>
    <script src="PataConectora.js"></script>
    <script src="socket.io.js"></script>
    <script src="NodoConectorSocket.js"></script>
    <script>
        $(function(){
            //var socket = io.connect('http://localhost:3000');
            var socket = io.connect('http://router-vortex.herokuapp.com:3000');
            var portal = new NodoPortalBidi();            
            var conector_socket = new NodoConectorSocket(socket);
            portal.conectarCon(conector_socket);
            conector_socket.conectarCon(portal);
            
            portal.pedirMensajes(new FiltroXClaveValor("tipoDeMensaje", "vortex.web.sockets.prueba"),
                                function(mensaje){
                                    console.log("Mensaje recibido: ", mensaje);                                    
                                });         
            var boton_enviar_mensaje = $("#btn_enviar_mensaje");
            boton_enviar_mensaje.click(function(){
                portal.enviarMensaje({
                    tipoDeMensaje: "vortex.web.sockets.prueba"
                });   
            });            
        });

    </script>
</html>